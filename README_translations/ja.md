# KonnyakuGPT: 多重モダルGPTによるより正確なアニメ字幕

[English](../README.md) [中文](zh.md)

READMEの日本語版はChatGPTによって英語版を翻訳して作成されましたが、一部の部分が正確でない可能性があります。

KonnyakuGPTは、日本のアニメを主な対象とした、高品質で使いやすいAIパワードの字幕生成ツールです。

## 主な特徴

1. **簡単に使用可能**: 1つの関数呼び出しで、高品質の字幕ファイルがビデオから生成されます。
2. **高品質**（予算に応じて異なります）: 約20分のビデオに対して約4ドルかかる「中」品質の設定で、KonnyakuGPTはビデオ専用用語（キャラクターの名前など）の80%を正確に認識し、論理的なストーリーを形成する字幕を生成できます。
   **KonnyakuGPTが生成する字幕を使用すれば、日本語に詳しくない観客でも、何が起こっているのかを推測せずに日本のアニメを観賞し、プロットを理解できます。**
3. **翻訳サポート**: KonnyakuGPTはどんな言語のための翻訳された字幕を作成できます。
4. **一時停止と再開**: 字幕生成中に定期的に進行状況が保存されます。
   したがって、進行中の字幕生成プロセスが誤って中断された場合でも、進行状況を再開できます。
5. **設定可能**: ビデオに異常なセットアップやビデオ固有の特別な用語（例: キャラクター名）が含まれている場合でも、KonnyakuGPTは動作します。ビデオの背景情報を入力し、発生する可能性のある特殊用語を含めれば、KonnyakuGPTはプロットを推論し、意味を持つ字幕を作成し、特別な用語を正確に処理します。

以下は、日本のアニメ「チンプイ」からのエピソードのスクリーンショットで、KonnyakuGPTから生成された翻訳された字幕が含まれています。

![example](../res/example.png)

KonnyakuGPTは、キャラクターの名前（日本語: "エリ" / 英語: "Eri" / 中国語: "惠理"）を正確に認識し、翻訳するだけでなく、シーン内の特別なオブジェクトも特定し、その機能を推測しました（シーンには特別な思考を生み出す「想像銃」があり、その効果は24時間続きます）。

## サンプルの使用法

事前に定義されたメソッドを使用して字幕を作成するには、デフォルトの字幕生成ツールをインポートし、背景情報を入力し、ジェネレーターを呼び出すだけです。

**KonnyakuGPTはOpen AIのAPIサービスを使用します。字幕生成ツールを呼び出す前にAPIキーを設定する必要があります。**
最も簡単な方法は、字幕を生成するPythonスクリプトを実行する前に環境変数 "OPENAI_API_KEY" を設定することです。
例:

```bash
# UnixライクなOSの場合にはこの行を実行してください
export OPENAI_API_KEY=<あなたのAPIキー>
# Windowsの場合にはこの行を実行してください
set OPENAI_API_KEY=<あなたのAPIキー>

python <KonnyakuGPTを呼び出すスクリプト>
```

以下は、アニメ「チンプイ」（藤子・F・不二雄による）のエピソードの字幕を生成するサンプルスクリプトです:

```Python
from pathlib import Path

from src.subtitle_generation import DefaultGenerator

generator = DefaultGenerator(quality_preset='medium')


# target_languageをNoneに設定すると、「翻訳しない」という意味です。
generator.generate_subtitles(video_path=Path('/home/trent/Downloads/episode.mp4'),
                            output_path=Path('test.srt'),
                            video_background=\
"""このビデオは、日本のアニメ「チンプイ」からの2つのエピソードで構成されています。
最初のエピソードのタイトルは "ワンダユウは占い師？" で、2番目のエピソードのタイトルは "エリさまは美少女" です。
各エピソードの冒頭には、そのエピソードのタイトルが叫ばれる紹介画面があります。

「チンプイ」の特別な用語:

A. キャラクター:

    1. 春日エリ（Kasuga Eri）、通称 "Eri"（中国語: 惠理）、"Eri-chan"、"Eri-sama"（中国語: 惠理大人）および "Kasuga"（中国語: 春日）。彼女は少年のような女の子です。彼女はクラスメイトの内木に恋をしており、マール星の王子との結婚を望んでいません。
    2. チンプイ（チンプイ、中国語: 芝比）。超能力を持つエイリアンのネズミ。
    3. ワンダユウ（ワンダユウ、中国語: 旺达）。超能力を持つエイリアンの犬。
    4. 内木翔（内木翔）、通称 "Uchiki"（中国語: 内木）。優等生。エリは彼に恋をしています。
    5. 小金山スネ美（小金山スネ美）、通称 "Sunemi" / "Sunemi-chan" / "Sunemi-san"（中国語: 诗奈美）。富豪で、特に家族の富を自慢することが好きです。
    6. 大江山政男（大江山政男）、通称 "Oeyama"（中国語: 大江山）。時折、クラスメイトをいじめる強い6年生。特に内木を。
    7. 木常小政（木常小政）、通称 "Shosei"（中国語: 小政）または "Kitsune"（中国語: 木常）。Oeyamaの相棒。
    8. 藤野ほたる（藤野ほたる）、通称 "Hotaru"（中国語: 小莹）。ガーリッシュな少女で、しばしばハンサムな王子が彼女に結婚しに来る夢を見ています。
    9. ルルエルヴ、通称 "Lulealv Denka"（中国語: 吕诺夫殿下）または単に "Denka"（殿下）。エリと結婚したいマール星の王子。しかし、エリは全く結婚したくありません。

    チンプイとワンダはどちらもマール（日本語: マール）星から来ています。
    この星は英語ではマール星、中国語では "玛尔星" とも呼ばれます。

B. その他:
    1. マール（マール）、チンプイとワンダが来た惑星の名前。
    2. 科法（科法 / かほう）。"科法" はマール星の特別な、高度で便利な技術です。
    チンプイとワンダはどちらも科法を使用しています。
""",
                            target_language=None)
```

## オマージュ

このプロジェクトは、有名な日本の漫画家、藤本弘（藤子・F・不二雄）の記憶に捧げられました。
"KonnyakoGPT"の名前のインスピレーションは、彼の最も有名な作品である「ドラえもん」の中の「ほんやくコンニャク」（「翻訳こんにゃく」）から来ています。
